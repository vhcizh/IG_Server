<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>마이 페이지</title>
</head>
<body>
<div th:replace="admin/header :: header"></div>
<h1>유저 정보</h1>

<div th:if="${message}" th:text="${message}" style="color: red;"></div>

<div th:if="${companyUser != null}">
    <p><strong>회사 이름:</strong> <span th:text="${companyUser.companyName}"></span></p>
    <p><strong>Email:</strong> <span th:text="${companyUser.companyEmail}"></span></p>
    <p><strong>인증 여부:</strong> <span th:text="${companyUser.verified} ? 'Yes' : 'No'"></span></p>
</div>

<div th:if="${companyUser == null}">
    <p>No user found.</p>
</div>

<form action="/admin/update-password" method="post">
    <input type="hidden" name="companyUserId" th:value="${companyUser.companyUserId}"/>
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

    <label for="currentPassword">현재 비밀번호:</label>
    <input type="password" id="currentPassword" name="currentPassword" required/><br/>

    <label for="newPassword">새 비밀번호:</label>
    <input type="password" id="newPassword" name="newPassword" required/><br/>

    <button type="submit">Update Password</button>
</form>

<form action="/admin/mypage/delete" method="post" onsubmit="return confirm('Are you sure you want to delete your account?');">
    <input type="hidden" name="companyUserId" th:value="${companyUser.companyUserId}"/>
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
    <button type="submit">Delete Account</button>
</form>

<form th:action="@{/admin/logout}" method="post">
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
    <button type="submit">로그아웃</button>
</form>

</body>
</html>
